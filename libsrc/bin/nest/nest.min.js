var nest;!function(t){var e;!function(t){}(e=t.user||(t.user={}))}(nest||(nest={}));var nest;!function(t){var e;!function(e){function n(e,n){t.core.startup(e,function(t){a(n)})}function a(e){t.user.checkLogin({},function(t){d=t,d.result=0,o(function(){e({result:0})})})}function o(e){t.user.isSupport({},function(t){g=t.getInfo;var n=t.loginTypes;if(n&&n.length)v=n;else if(t.loginType&&t.loginType.length){for(var a=t.loginType,o=[],r=0;r<a.length;r++)o.push({loginType:a[r]});v=o}else v=[];e()})}function r(){if(d&&d.token)return[];if(s()&&v&&v.length)for(var t=0;t<v.length;t++){var e=v[t];e.accInfo=null,v[t]=e}return v.concat()}function i(t,e){m?(m=!1,d&&d.token?e(d):l(t.loginType,e)):l(t.loginType,e)}function l(e,n){var a={};e&&""!=e&&"default"!=e&&(a.loginType=e),t.user.login(a,function(t){t.token?(u(),t.result=0,n(t)):(null==t.result&&(t.result=-2),n(t))})}function s(){return"1"==t.utils.localStorage.getItem("egret_logout")}function u(){return t.utils.localStorage.setItem("egret_logout",null)}function c(e,n){var a=function(e){0==e.result&&(d=null,t.utils.localStorage.setItem("egret_logout","1")),n(e)};t.user.logout(e,a)}function p(t,e){var n={result:0,getInfo:g};e(n)}function f(e,n){t.user.getInfo(e,n)}e.startup=n,e.getLoginTypes=r;var d,g,v,m=!0;e.login=i,e.logout=c,e.isSupport=p,e.getInfo=f}(e=t.easyuser||(t.easyuser={}))}(nest||(nest={}));var nest;!function(t){var e;!function(e){function n(e){for(var n=["core","user","iap","share","social","app"],o=0;o<n.length;o++){var r=n[o];if(t[e]&&t[e][r]){null==t[r]&&(t[r]={});for(var i in t[e][r])t[r][i]=t[e][r][i];for(var i in t[r]){var l=t[r][i];"function"==typeof l&&a(r,i)}}}}function a(e,n){var a,o=t[e][n];a="isSupport"==n?function(t,a){u("[Nest]调用接口nest."+e+"."+n);var r=t,i=a;"function"==typeof t&&(r={},i=t);var l=function(t){u("[Nest]获得nest."+e+"."+n+"接口返回 : "+JSON.stringify(t)),i.call(null,t)};o.call(null,r,l)}:function(t,a){u("[Nest]调用接口nest."+e+"."+n);var r=function(t){u("[Nest]获得nest."+e+"."+n+"接口返回 : "+JSON.stringify(t)),a.call(null,t)};o.call(null,t,r)},t[e][n]=a}function o(){return void 0==e.$spid&&(e.$spid=parseInt(s("egret.runtime.spid"))),e.$spid}function r(){return void 0==p&&(p=s("channelTag")),p}function i(){return void 0==f&&(f=l(9392)),f}function l(t){return o()==t}function s(t){if(e.$EGRET_SUPPORT)return egret.getOption(t);if(window.location){var n=location.search;if(""==n)return"";n=n.slice(1);for(var a=n.split("&"),o=a.length,r=0;o>r;r++){var i=a[r],l=i.split("=");if(l[0]==t)return l[1]}}return""}function u(t){e.$DEBUG_LOG&&(e.$EGRET_SUPPORT&&egret.log?egret.log(t):console.log(t))}function c(t,e,n,a,o){var r="";for(var i in e)r+=i+"="+e[i]+"&";""!=r&&(r=r.substr(0,r.length-1));var l=new egret.URLLoader;l.addEventListener(egret.Event.COMPLETE,function(){var t=JSON.parse(l.data);a(t)},this),l.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){o()},this);var s=new egret.URLRequest(t);s.method=n,s.data=new egret.URLVariables(r),l.load(s)}e.$DEBUG_LOG=!1,e.$changeMethod=n,e.$getSpid=o;var p;e.$getChannelTag=r;var f;e.$isQQBrowser=i,e.$isTargetPlatform=l,e.$getOption=s,e.$log=u,e.setProxy=c}(e=t.utils||(t.utils={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(e){function n(e,n){if(t.$isRuntime)egret.localStorage.setItem(e,n);else try{window.localStorage.setItem(e,n)}catch(a){}}function a(e){if(t.$isRuntime)return egret.localStorage.getItem(e);try{return window.localStorage.getItem(e)}catch(n){return}}e.setItem=n,e.getItem=a}(e=t.localStorage||(t.localStorage={}))}(e=t.utils||(t.utils={}))}(nest||(nest={})),this.navigator?nest.utils.$isRuntime=!1:nest.utils.$isRuntime=!0,nest.utils.$isRuntime&&(10044!=egret_native.getOption("egret.runtime.spid")&&egret_native.getOption("egret.runtime.nest")||!function t(e,n,a){function o(i,l){if(!n[i]){if(!e[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return o(n?n:t)},c,c.exports,t,e,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)o(a[i]);return o}({1:[function(t,e,n){var a=function(){return this}(),o=a.CMGAME_SDK_EGRET={},r=t(9),i=t(8),l=t(5),s=!1;r.getVersion=function(){return s},i.checkIsGameSDK(function(t,e){t&&(s=e)}),o.pay=a.CMPAY_EGRET=r,o.client=a.CMGAME_EGRET=i,o.ad=l},{5:5,8:8,9:9}],2:[function(t,e,n){function a(t){var e,n=!1,a=!1,r=[];return function(i){n?i.apply(null,e):(r.push(i),a||(a=!0,t(function(){n||(n=!0,a=!1,e=o.slice(arguments),o.forEach(r,function(t){t.apply(null,e)}),r.length=0,r=null)})))}}var o=t(12);e.exports=a},{12:12}],3:[function(t,e,n){e.exports=function(t){var e,n=!1,a=!1,o=[];return function(r){n?r(n,e):(o.push(r),a||(a=!0,t(function(t,r){n=t,n&&(e=r),setTimeout(function(){a=!1;for(var t=0,r=o.length;r>t;++t){var i=o[t];i(n,e)}o.length=0,n&&(o=null)})})))}}},{}],4:[function(t,e,n){function a(){this._listeners={}}var o=t(12),r=a.prototype;r.on=function(t,e){var n,a=this._listeners;n=a.hasOwnProperty(t)?a[t]:a[t]=[],n.push(e)},r.off=function(t,e){var n,a=this._listeners;a.hasOwnProperty(t)&&(n=a[t]);for(var o=n.length,r=0;o>r;++r)n[r]===e&&n.splice(r,1)},r.fire=function(t){var e=this._listeners;if(e.hasOwnProperty(t))for(var n=o.slice(arguments,1),a=e[t],r=a.length,i=a.slice(),l=0;r>l;++l){var s=i[l];try{s.apply(null,n)}catch(u){}}},e.exports=a},{12:12}],5:[function(t,e,n){function a(t){this._option=t}function o(t,e){function n(){if(o>a){var r=t[a],i=r.type;if(i&&f.hasOwnProperty(i)){var l=f[i];l.canShow?l.canShow(function(t){t?e(r):(++a,n())}):e(r)}else++a,n()}else e(null)}var a=0,o=t.length;n()}function r(t){var e=Date.now();return 3e4>e-v?g.error("Only one ad allowed in 30s"):(v=e,t=c({gameid:"",pos:a.POS_CENTER},t),i||(i=p(function(e){s.ajax({url:"http://api.gc.liebao.cn/index.php?r=1/cp",data:{gameid:t.gameid}},function(t,n,a){var o;if(t)try{o=JSON.parse(a)}catch(r){}e(Boolean(t&&o&&0===o.ret&&o.data),o)})})),void i(function(e,n){if(e){var r=n.data,i=t.pos||a.POS_CENTER;l&&(l.destroy(),l=null);var s=r[i];if(!s||!s.length)return;o(s,function(e){if(e){var n=e.type,a=c({gameid:t.gameid,debug:t.debug,adtype:n,pos:i,container:document.documentElement},e),o=f[n],r=new o(a);l=r,r.show()}})}}))}var i,l,s=t(11),u=t(12),c=u.extend,p=t(3),f={gdt:t(7)};a.POS_CENTER=1,a.POS_BOTTOM=2,a.show=r;var d=a.prototype;d.show=function(){r(this._option)};var g=function(){return this.console}(),v=0;e.exports=a},{11:11,12:12,3:3,7:7}],6:[function(t,e,n){function a(){}var o=t(11).report,r={show:1,click:2,close:3,error:4},i=a.prototype;i._report=function(t,e){var n=this._option;o("http://api.gc.liebao.cn/index.php?r=1/cp/report",{gameid:n.gameid,type:t,clientId:n.clientId,slotId:n.slotId,_code:e,adtype:n.adtype,_:Math.random()})},i._onShow=function(){this._report(r.show)},i._onError=function(t){this._report(r.error,t)},i._onClick=function(){this._report(r.click)},i._onClose=function(t){this._report(r.close,t)},e.exports=a},{11:11}],7:[function(t,e,n){function a(t){var e=this;e._option=t,e._destroyed=!1}var o=t(8),r=t(12),i=t(6);a.canShow=function(t){o.checkIsGameSDK(t)};var l=a.prototype=r.create(i.prototype);l.show=function(){var t=this,e=t._option;return!t._destroyed&&e&&e.clientId&&e.slotId?(o.callWidePointAd({clientid:e.clientId,posid:e.slotId}),void t._onShow()):t._onError(-902)},l.destroy=function(){var t=this;t._destroyed=!0},e.exports=a},{12:12,6:6,8:8}],8:[function(t,e,n){function a(t,e){var n=!1,a=!1,o=egret.setTimeout(function(){a||(a=!0,e(n))},null,t);egret.ExternalInterface.addCallback("get_game_sdk_version",function(t){egret.clearTimeout(o),a||(a=!0,n=t,e(n))}),egret.ExternalInterface.call("get_game_sdk_version","")}function o(t){egret.ExternalInterface.addCallback("get_device_info",function(e){var n=!1;if("string"==typeof e)try{n=JSON.parse(e)}catch(a){}else n=e;l=n,t(n)})}var r=t(2),i=n;i.checkIsGameSDK=r(function(t){a(1e4,function(e){e&&!isNaN(e)?t(!0,e):t(!1,-1)})}),i.saveShortcutInfo=function(t){egret.ExternalInterface.call("save_shortcut_info",JSON.stringify({token:String(Math.random()),value:JSON.stringify(t)}))},i.pushIcon=function(t){t.title=t.Title,t.detailUrl=t.DetailUrl,t.picUrl=t.PicUrl,egret.ExternalInterface.call("push_icon",JSON.stringify(t))},i.dispatchGameLoginData=function(){var t;return egret.ExternalInterface.addCallback("dispatchGameLoginData",function(e){if(t){var n=!1;if("string"==typeof e)try{n=JSON.parse(e)}catch(a){}else n=e;t(n)}}),function(e,n){var a=t;t=function(e){t=a,n(e)},egret.ExternalInterface.call("dispatchGameLoginData",JSON.stringify(e))}}();var l="";i.getGameSDKDeviceID=function(){return l},i.getGameSDKDeviceIDAsync=r(o),i.wsjLaunchPay=function(){var t={};return egret.ExternalInterface.addCallback("wsj_pay",function(e){var n;try{n=JSON.parse(e)}catch(a){}var o;if(n&&(o=n.token),o&&t.hasOwnProperty(o)){var r;try{r=JSON.parse(n.response)}catch(a){}var i=t[o];delete t[o],i(r)}}),function(e,n){var a=String(Math.random());t[a]=n,egret.ExternalInterface.call("wsj_pay",JSON.stringify({token:a,request:JSON.stringify(e)}))}}()},{2:2}],9:[function(t,e,n){function a(t){r.place({data:t,debug:"undefined"!=typeof t.debug?t.debug:Boolean(window.CMPAY_DEBUG)},function(t,e,n,a){l.fire("cmpay_order_placed",{type:"cmpay_order_placed",transaction_id:a&&a.data?a.data.transaction_id:null,ret:e,msg:n,success:t,response:a}),t?i(a.data.args,function(t){var e=t&&"number"==typeof t.resultCode?t.resultCode:-99,n=t&&0===t.resultCode;l.fire("cmpay_order_complete",{type:"cmpay_order_complete",transaction_id:a.data.transaction_id,ret:e,success:n,payed:n,paid:n,wsjResponse:t})}):l.fire("cmpay_order_complete",{type:"cmpay_order_complete",transaction_id:a&&a.data?a.data.transaction_id:null,ret:-99,success:!1,payed:!1,paid:!1,wsjResponse:null})})}var o=t(4),r=t(10),i=t(8).wsjLaunchPay,l=e.exports=new o;l.purchase=a},{10:10,4:4,8:8}],10:[function(t,e,n){function a(t,e){o({pay_method:"wsjpay/sdk",data:t.data,debug:t.debug},function(t,n,a){var o,r="Unkown error";if(a){a=a.replace(/"transaction_id":(\d+)/,'"transaction_id":"$1"');try{o=JSON.parse(a)}catch(i){t=!1,r="Empty response"}}else t=!1;var l=t&&o&&o.data&&o.data.args&&o.data.args.goodsTokenUrl&&1===o.ret;if(l&&o.data){var s=o.data.goodsTokenUrl;r=s?"ok":"Empty goods token url"}e(l,l?0:o?o.ret:-1,r,o)})}function o(t,e){var n=t.data&&t.data.access_token;n?s(function(a){if(32===n.length||"sdk"===n.slice(0,3)){var o={token:n,method:t.pay_method,dev:t.debug?1:null,packageInfo:a},l=t.data;for(var s in l)l.hasOwnProperty(s)&&"access_token"!==s&&(o[s]=l[s]);r({method:"GET",url:"http://gclogin.liebao.cn/api/native/order/pay",data:o},e)}else{var l=t.data;l.packageInfo=a,r({method:"GET",url:"http://gc.liebao.cn/pay/topay.php",data:{method:t.pay_method,args:i(l),dev:t.debug?1:null}},e)}}):e(!1,-1,'{"msg":"Token not provided."}')}var r=t(11).ajax,i=t(12).param,l=t(2),s=l(function(t){var e=egret.setTimeout(function(){t("")},null,1e3);egret.ExternalInterface.addCallback("getPackageInfo",function(n){egret.clearTimeout(e),t(n)}),egret.ExternalInterface.call("getPackageInfo","")});n.place=a},{11:11,12:12,2:2}],11:[function(t,e,n){function a(t,e){var n=new egret.URLLoader,a=new egret.URLRequest;t.method&&"post"===t.method.toLowerCase()&&(a.method=egret.URLRequestMethod.POST);var o="";t.data&&(o="string"==typeof t.data?t.data:r(t.data),a.data=new egret.URLVariables(o)),a.url=t.url,n.dataFormat=egret.URLLoaderDataFormat.TEXT,n.addEventListener(egret.Event.COMPLETE,function(){e(!0,0,n.data)}),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){e(!1,-1,n.data)},this),n.load(a)}function o(){}var r=t(12).param;n.ajax=a,n.report=o},{12:12}],12:[function(t,e,n){function a(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){var a=t[n],o=typeof a;("number"===o||"string"===o||"boolean"===o)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}return e.join("&")}function o(t,e){var n;if(t&&"object"==typeof t){var a=t.length;if("number"==typeof a){if(0===a)return;if(0 in t&&[a-1]in t){for(n=0;a>n&&e(t[n],n)!==!1;++n);return}}for(n in t)if(t.hasOwnProperty(n)&&e(t[n],n)===!1)break}}function r(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i(){}function l(t){return i.prototype=t,new i}var s=Array.prototype.slice,u=function(t,e,n){return s.call(t,e,n)};n.param=a,n.forEach=o,n.slice=u,n.extend=r,n.create=l},{}]},{},[1]));var nest;!function(t){var e;!function(e){function n(t,e,n){void 0===n&&(n=!1);var o="nest";n?(egret.ExternalInterface.addCallback(o,function(t){var n=JSON.parse(t);e(n.data)}),egret.ExternalInterface.call(o,JSON.stringify(t))):(c.push({data:t,callback:e}),a())}function a(){if(c.length){if(p)return;p=!0;var t=c.shift(),e="nest";egret.ExternalInterface.addCallback(e,function(e){var n=JSON.parse(e);t.callback(n.data),p=!1,a()}),egret.ExternalInterface.call(e,JSON.stringify(t.data))}}var o;!function(t){function e(t,e){var a={module:"core",action:"callCustomMethod",param:t};n(a,e)}function a(t){var e="nest_callback";egret.ExternalInterface.addCallback(e,function(e){var n=JSON.parse(e);t(n)})}t.callCustomMethod=e,t.addCallback=a}(o=e.core||(e.core={}));var r;!function(e){function a(e,a){var o={module:"user",action:"isSupport",param:e};if(t.utils.$isQQBrowser()){var r=function(t){t.logout=1,a.call(null,t)};n(o,r)}else n(o,a)}function o(t,e){var a={module:"user",action:"checkLogin",param:t};n(a,e)}function r(t,e){var a={module:"user",action:"login",param:t};n(a,e,!0)}function i(t,e){var a=egret.getOption("egret.runtime.nest");if(a>=4||"custom"==a){var o={module:"user",action:"logout",param:t};n(o,e)}else e({result:0})}function l(t,e){var a={module:"user",action:"getInfo",param:t};n(a,e)}e.isSupport=a,e.checkLogin=o,e.login=r,e.logout=i,e.getInfo=l}(r=e.user||(e.user={}));var i;!function(t){function e(t,e){var a={module:"iap",action:"pay",param:t};n(a,e)}t.pay=e}(i=e.iap||(e.iap={}));var l;!function(t){function e(t,e){var a={module:"share",action:"isSupport",param:t};n(a,e)}function a(t,e){e.call(null,{result:-2})}function o(t,e){var a={module:"share",action:"share",param:t};n(a,e,!0)}t.isSupport=e,t.setDefaultData=a,t.share=o}(l=e.share||(e.share={}));var s;!function(t){function e(t,e){var a={module:"social",action:"isSupport",param:t};n(a,e)}function a(t,e){var a={module:"social",action:"getFriends",param:t};n(a,e)}function o(t,e){var a={module:"social",action:"openBBS",param:t};n(a,e)}t.isSupport=e,t.getFriends=a,t.openBBS=o}(s=e.social||(e.social={}));var u;!function(e){function a(t,e){var a={module:"app",action:"isSupport",param:t};n(a,e)}function o(t,e){var a={module:"app",action:"attention",param:t};n(a,e)}function r(t,e){var a={module:"app",action:"exitGame",param:t};n(a,e)}function i(t,e){var a={module:"app",action:"sendToDesktop",param:t};n(a,e)}function l(e,n){var a=t.utils.$API_DOMAIN+"user/getCustomInfo",o={appId:t.utils.$APP_ID,runtime:1,egretChanId:t.utils.$getSpid()};t.utils.setProxy(a,o,egret.URLRequestMethod.GET,function(t){var e=t.data;e.result=0,0==t.code?n.call(null,e):n.call(null,{result:-2})},function(){n.call(null,{result:-2})})}e.isSupport=a,e.attention=o,e.exitGame=r,e.sendToDesktop=i,e.getInfo=l}(u=e.app||(e.app={}));var c=[];e.callRuntime=n;var p=!1;e._getData=a}(e=t.runtime||(t.runtime={}))}(nest||(nest={}));var nest;!function(t){var e;!function(e){function n(t,e){var n;if(n=egret.localStorage.getItem("deviceid")){if(console.log("cm old local deviceid "+n),n.indexOf("{")>=0){var a=JSON.parse(n);t.postData.deviceid=a.did}else t.postData.deviceid=n;i(t.postData,e)}else{console.log("cm old CMPAY_EGRET.version "+CMPAY_EGRET.getVersion());var o=0==CMPAY_EGRET.getVersion()||0==CMPAY_EGRET.getVersion()?"getUid":"get_device_info",r=!1,l=function(n){r||(r=!0,console.log(n),t.postData.deviceid=n||egret.localStorage.getItem("deviceid")||"",i(t.postData,e))};egret.ExternalInterface.addCallback(o,function(t){if(console.log("cm old CMPAY_EGRET"),"get_device_info"==o)if(console.log("cm old get_device_info "+t),t){var e=JSON.parse(t);l(e.did)}else l(null);else l(t)}),egret.setTimeout(function(){console.log("cm old timeout"),l(null)},this,2e3),egret.ExternalInterface.call(o,"")}}function a(e){var n={},a=t.utils.$API_DOMAIN+"app/getInfo";n.egretChanId=t.utils.$getSpid(),n.egretGameId=t.utils.$APP_ID,n.debug=1,l(a,n,egret.URLRequestMethod.GET,function(t){e(t)})}function o(e,n,a){var o={};o.access_token=e.access_token,o.openid=e.openid;var r=t.utils.$API_DOMAIN+"game/"+t.utils.$getSpid()+"/"+t.utils.$APP_ID+"/";o.runtime=1,o.showGame=1,a&&(o.newLiebaoApi=1),l(r,o,egret.URLRequestMethod.GET,function(t){n(t)})}function r(n,a){var o=t.utils.$API_DOMAIN+"user/placeOrder",r={id:e.user.egretInfo.egretUserId,appId:t.utils.$APP_ID,time:Date.now(),runtime:1};for(var i in n)r[i]=n[i];l(o,r,egret.URLRequestMethod.GET,function(t){a(t)})}function i(t,e){var n="http://gclogin.liebao.cn/api/user/quick_register";l(n,t,egret.URLRequestMethod.POST,e)}function l(t,e,n,a){var o="";for(var r in e)o+=r+"="+e[r]+"&";""!=o&&(o=o.substr(0,o.length-1)),console.log("cm old solution ="+t+"?"+o);var i=new egret.URLLoader;i.addEventListener(egret.Event.COMPLETE,function(){console.log("cm old solution  ="+i.data);var t=JSON.parse(i.data);a(t)},this);var l=new egret.URLRequest(t);l.method=n,l.data=new egret.URLVariables(o),i.load(l)}e.callRuntime=n,e.loginBefore=a,e.loginAfter=o,e.payBefore=r}(e=t.cm||(t.cm={}))}(nest||(nest={})),function(t){var e;!function(e){var n;!function(e){function n(n,a){function o(t){e.egretInfo={egretUserId:t.data.id},t.data.result=t.status,a(t.data)}function r(e){1==e.ret?(e.access_token=e.ssid,egret.localStorage.getItem("deviceid")||egret.localStorage.setItem("deviceid",e.deviceid),t.cm.loginAfter(e,o,!1)):a({result:1})}function i(e){console.log("cm old loginHandler1"),console.log(JSON.stringify(e,null,4));var n={};n.access_token=e.cp.token,n.openid=e.user.openid,egret.localStorage.setItem("cm_token",n.access_token),console.log("cm old loginHandler2"),t.cm.loginAfter(n,o,!0)}function l(e){if(0==e.code){var o=e.data;s.client_id=o.client_id,s.client_secret=o.client_secret,s.redirect_uri=o.redirect_uri,t.cm.app.$initDesktop({Title:o.title,DetailUrl:o.detailUrl,PicUrl:o.picUrl}),CMGAME_EGRET.checkIsGameSDK(function(e,a){if(e){console.log("cm old checkIsGameSDK1");var l={clientId:o.client_id,clientSecret:o.client_secret,redirectUri:o.redirect_uri};egret.localStorage.getItem("cm_token"),console.log(JSON.stringify(l,null,4)),console.log("cm old checkIsGameSDK2"),CMGAME_EGRET.dispatchGameLoginData(l,i)}else console.log("cm old checkIsGameSDK2"),t.cm.callRuntime({module:"user",action:"checkLogin",param:n,postData:s},r)})}else a({result:1})}var s={};t.cm.loginBefore(l)}function a(e,n){var a={module:"user",action:"login",param:e};t.cm.callRuntime(a,n)}function o(t,e){console.log("cm old nest isSupport start"),e({getInfo:0,loginType:null,loginTypes:null,result:0})}function r(e,n){t.runtime.user.logout(e,n)}e.checkLogin=n,e.login=a,e.isSupport=o,e.logout=r}(n=e.user||(e.user={}))}(e=t.cm||(t.cm={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(e){function n(e,n){var o=0,r=-1,i=-2;t.payBefore(e,function(t){if(0==t.code){a&&(CMPAY_EGRET.on("cmpay_order_complete",function(t){console.log("cm old solution cmpay_order_complete  "+JSON.stringify(t,null,4)),n(1==t.success?{result:o}:2==t.ret?{result:r}:{result:i})}),a=!1);var e={access_token:t.data.access_token,client_id:t.data.client_id,product_id:t.data.product_id,unit:t.data.unit,payload:t.data.payload,notify_url:t.data.notify_url,money:t.data.money,order_name:t.data.order_name,game_icon:t.data.game_icon,game_name:t.data.game_name};CMPAY_EGRET.purchase(e)}else n({result:i})})}var a=!0;e.pay=n}(e=t.iap||(t.iap={}))}(e=t.cm||(t.cm={}))}(nest||(nest={})),function(t){var e;!function(e){var n;!function(e){function n(e,n){t.runtime.social.isSupport(e,n)}function a(e,n){t.runtime.social.getFriends(e,n)}function o(e,n){t.runtime.social.openBBS(e,n)}e.isSupport=n,e.getFriends=a,e.openBBS=o}(n=e.social||(e.social={}))}(e=t.cm||(t.cm={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(t){function e(t,e){e({result:0,share:0})}t.isSupport=e}(e=t.share||(t.share={}))}(e=t.cm||(t.cm={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(t){function e(t){o=t,egret.ExternalInterface.call("save_shortcut_info",JSON.stringify({token:String(Math.random()),value:JSON.stringify(t)}))}function n(t,e){e(0!=CMPAY_EGRET.getVersion()&&!isNaN(CMPAY_EGRET.getVersion())&&CMPAY_EGRET.getVersion()>301030?{result:0,sendToDesktop:1,attention:0}:{result:0,sendToDesktop:0,attention:0})}function a(t,e){o?(egret.ExternalInterface.call("push_icon",JSON.stringify({title:o.Title,detailUrl:o.DetailUrl,picUrl:o.PicUrl})),e({result:0})):e({result:-1})}var o;t.$initDesktop=e,t.isSupport=n,t.sendToDesktop=a}(e=t.app||(t.app={}))}(e=t.cm||(t.cm={}))}(nest||(nest={}));var nest;!function(t){var e;!function(e){function n(t,e,n,a){var o="";for(var r in e)o+=r+"="+e[r]+"&";""!=o&&(o=o.substr(0,o.length-1)),console.log("[Nest]qq hall send : "+t+"?"+o);var i=new egret.URLLoader;i.addEventListener(egret.Event.COMPLETE,function(){console.log("[Nest]qq hall get data : "+i.data);var t=JSON.parse(i.data);a(t)},this);var l=new egret.URLRequest(t);l.method=n,l.data=new egret.URLVariables(o),i.load(l)}function a(a,o){var r=t.utils.$API_DOMAIN+"user/placeOrder",i={id:e.userId,appId:t.utils.$APP_ID,time:Date.now(),openid:e.OpenId,openkey:e.OpenKey,paytoken:e.payToken,runtime:1};for(var l in a)i[l]=a[l];n(r,i,egret.URLRequestMethod.GET,function(t){o(t)})}function o(t){var e=JSON.stringify(t);egret.ExternalInterface.call("HALL_EGRET_MSG_FROM",e)}function r(){egret.ExternalInterface.addCallback("HALL_EGRET_MSG_TO",function(a){var r=JSON.parse(a);switch(r.msgType){case e.login_callback_type:if(null==r.accessToken){if(e.loginNum++,e.loginNum>=3){var i={result:-1,token:void 0};return e.loginCallback.call(null,i),void(e.loginCallback=null)}var l="OpenId/OpenKey 为空";return o({msgType:e.login_back_call_type,msgVersion:e.version,errorID:1,loginInfoStr:l}),void o({msgType:e.login_call_type,msgVersion:e.version})}if(e.loginCallback){e.gameType=r.msgType,e.gameVersion=r.msgVersion,e.OpenId=r.openId,e.OpenKey=r.accessToken,e.enterType=r.enterType,e.enterId=r.enterId,e.payToken=r.payToken;var l="登录成功";o({msgType:e.login_back_call_type,msgVersion:e.version,errorID:0,loginInfoStr:l});var s=t.utils.$API_DOMAIN+"game/"+t.utils.$getSpid()+"/"+t.utils.$APP_ID,u={};u.openkey=e.OpenKey,u.openid=e.OpenId,u.paytoken=e.payToken,u.runtime=1,u.showGame=1,n(s,u,egret.URLRequestMethod.GET,function(t){var n=t.data;e.userId=n.id,e.loginCallback.call(null,n),e.loginCallback=null})}break;case e.pay_callback_type:if(e.payCallback){var c=-1;switch(r.payState){case-1:case 1:case 2:e.payOrderInfo=null,e.payCallback.call(null,{result:c,status:c}),e.payCallback=null;break;case 0:e.iap.repay()}}break;case e.share_callback_type:if(e.shareCallback){var c=r.errorid;e.shareCallback.call(null,{result:c,status:c}),e.shareCallback=null}}})}e.login_call_type=102,e.login_back_call_type=100,e.pay_call_type=101,e.share_call_type=104,e.login_callback_type=200,e.pay_callback_type=201,e.share_callback_type=204,e.loginCallback=null,e.payCallback=null,e.shareCallback=null,e.version="V1.0.0",e.loginNum=0,e.payBefore=a,e.callHall=o,e.init=r}(e=t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(e){function n(t,e){var n=0,a={status:n,result:n,checkLogin:0,login:1,logout:0,getInfo:0};e.call(null,a)}function a(t,e){var n=-1,a={status:n,result:n,loginType:void 0,token:void 0};e.call(null,a)}function o(e,n){t.loginCallback=n,t.callHall({msgType:t.login_call_type,msgVersion:t.version})}e.isSupport=n,e.checkLogin=a,e.login=o}(e=t.user||(t.user={}))}(e=t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(e){function n(e,n){t.payOrderInfo||(t.payOrderInfo=e,t.payBefore(e,function(e){e=e.data,0==e.code?n.call(null,{result:0,status:0}):(t.payCallback=n,t.callHall({msgType:t.pay_call_type,msgVersion:"V1.0.0",acctType:"",zoneId:"",payValue:e.qCoins,isCanChange:!1}))}))}function a(){if(t.payOrderInfo){var e=t.payOrderInfo,n=t.payCallback;t.payBefore(e,function(t){t=t.data;var e=t.status;n.call(null,{result:e,status:e})}),t.payOrderInfo=null,t.payCallback=null}}e.pay=n,e.repay=a}(e=t.iap||(t.iap={}))}(e=t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(t){function e(t,e){var n=0,a={status:n,result:n,attention:0,sendToDesktop:0,exitGame:1};e.call(null,a)}function n(t){var e=0,n={status:e,result:e};t.call(null,n)}function a(t,e){}function o(t,e){}t.isSupport=e,t.exitGame=n,t.attention=a,t.sendToDesktop=o}(e=t.app||(t.app={}))}(e=t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(e){function n(t,e){var n=0,a={status:n,result:n,share:1};e.call(null,a)}function a(e,n){t.shareCallback=n,t.callHall({msgType:t.share_call_type,msgVersion:"V1.0.0",title:e.title,summary:e.description,imageLocalUrl:"",targetUrl:e.url})}e.isSupport=n,e.share=a}(e=t.share||(t.share={}))}(e=t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(t){function e(t,e){var n=0,a={status:n,result:n,getFriends:0,openBBS:0};e.call(null,a)}function n(t,e){}function a(t,e){}t.isSupport=e,t.getFriends=n,t.openBBS=a}(e=t.social||(t.social={}))}(e=t.qqhall||(t.qqhall={}))}(nest||(nest={}));var nest;!function(t){var e;!function(e){function n(e,n,a,o){var r="";for(var i in n)r+=i+"="+encodeURIComponent(n[i])+"&";""!=r&&(r=r.substr(0,r.length-1));for(var l="[Nest]qq hall2 send : "+e+"?"+r,s=0;s<Math.ceil(l.length/450);s++)t.utils.$log(l.slice(450*s,450*(s+1)));var u=new egret.URLLoader;u.addEventListener(egret.Event.COMPLETE,function(){t.utils.$log("[Nest]qq hall2 get data : "+u.data);var e=JSON.parse(u.data);o(e)},this);var c=new egret.URLRequest(e);c.method=a,c.data=new egret.URLVariables(r),u.load(c)}function a(e,a){var o=t.utils.$API_DOMAIN+"user/placeOrder",r={id:R,appId:t.utils.$APP_ID,time:Date.now(),qbopenkey:b,runtime:1};for(var i in e)r[i]=e[i];n(o,r,egret.URLRequestMethod.GET,function(t){a(t)})}function o(e,a){var o=t.utils.$API_DOMAIN+"pay/"+t.utils.$getSpid()+"/"+t.utils.$APP_ID;n(o,e,egret.URLRequestMethod.GET,function(t){a(t)})}function r(e){var n=JSON.stringify(e);t.utils.$log("call hall : "+n),egret.ExternalInterface.call("HALL_EGRET_MSG_FROM",n)}function i(t){ee=t,r({msgType:B,appid:p,appsig:f,appsigData:d,qbopenid:O,msgVersion:oe})}function l(t){ne=t,r({msgType:J,appid:p,appsig:f,msgVersion:oe})}function s(t){te=t,r({msgType:x,appid:p,qbopenid:O,refreshToken:"",msgVersion:oe})}function u(t){ae=t,r({msgType:H,appid:p,appsig:f,appsigData:d,qbopenid:"",qbopenkey:"",msgVersion:oe})}function c(){egret.ExternalInterface.addCallback("HALL_EGRET_MSG_TO",function(e){t.utils.$log("get hall data : "+e);for(var a=0;a<Math.ceil(e.length/450);a++)t.utils.$log(e.slice(450*a,450*(a+1)));var r,s=JSON.parse(e);switch(s.msgType){case V:if(W)if(r=s.result,0==r){y=s.msgType,_=s.msgVersion,k=s.openId,S=s.accessToken,I=s.enterType,E=s.enterId,T=s.payToken,O=s.qbopenid,b=s.qbopenkey,P=s.nickName,D=s.avatarUrl;var u=function(){if(W){var e=t.utils.$API_DOMAIN+"game/"+t.utils.$getSpid()+"/"+t.utils.$APP_ID,a={};a.openId=k,a.accessToken=S,a.payToken=T,a.qbopenid=O,a.qbopenkey=b,a.nickName=P,a.avatarUrl=D,a.balance=re,a.gen_balance=g,a.first_save=v,a.save_amt=m,a.pf=$,a.baseinfo=JSON.stringify(h),a.runtime=1,n(e,a,egret.URLRequestMethod.GET,function(t){var e=t.data;R=e.id,W.call(null,e),W=null})}},c=!1,p=!1;i(function(){c=!0,c&&p&&u()}),l(function(){p=!0,c&&p&&u()})}else W.call(null,{result:-2}),W=null;break;case F:if(X){if(0!=q){var f={};f.realSaveNum=s.realSaveNum,f.orderno=s.orderno,f.customMeta=G,o(f,function(t){0==t.code?(C=null,X.call(null,{result:0,status:0}),X=null,i(null)):(C=null,X.call(null,{result:-2,status:-2}),X=null)});break}2==s.resultCode?(C=null,X.call(null,{result:-1,status:-1}),X=null):0==s.resultCode?i(function(){se.repay()}):(C=null,X.call(null,{result:-2,status:-2}),X=null)}break;case j:Z&&(r=s.errorid,Z.call(null,{result:r,status:r}),Z=null);break;case K:0==s.result&&(b=s.qbopenkey),te&&(te.call(null),te=null);break;case Y:0==s.result&&(re=s.balance,g=s.gen_balance,v=s.first_save,m=s.save_amt),ee&&(ee.call(null),ee=null);break;case Q:0==s.result&&(h=s.baseinfo),ne&&(ne.call(null),ne=null);break;case z:1==s.loginType?ie.push("qq"):2==s.loginType?ie.push("wx"):3==s.loginType&&(ie.push("qq"),ie.push("wx")),ae&&(ae.call(null),ae=null)}})}var p,f,d,g,v,m,h,y,_,k,S,I,E,T,O,b,P,D,R,$,C,q,L,M,A,G,N=100,w=101,U=104,x=106,B=107,J=108,H=109,V=200,F=201,j=204,K=206,Y=207,Q=208,z=209,W=null,X=null,Z=null,te=null,ee=null,ne=null,ae=null,oe="1.0.0",re=0,ie=[];e.init=c;var le;!function(e){function a(t,e){u(function(){var t=0,n={status:t,result:t,loginType:ie,checkLogin:0,login:1,logout:0,getInfo:0};e.call(null,n)})}function o(e,a){var o=t.utils.$API_DOMAIN+"app/getSignInfo",r={egretChanId:t.utils.$getSpid(),appId:t.utils.$APP_ID};n(o,r,egret.URLRequestMethod.GET,function(t){p=t.data.appid,f=t.data.appsig,d=t.data.appsigdata;var e=-2,n={status:e,result:e,loginType:void 0,token:void 0};a.call(null,n)})}function i(t,e){W=e,$=t.loginType,r({msgType:N,appid:p,appsig:f,appsigData:d,loginType:$,msgVersion:oe})}e.isSupport=a,e.checkLogin=o,e.login=i}(le=e.user||(e.user={}));var se;!function(t){function e(t,e){C||(C=t,s(function(){a(t,function(t){t=t.data,L=t.payValue,A=t.payInfo,M=t.payItem,G=t.customMeta,X=e,q=L>re?0:1,o()})}))}function n(){L>re?X&&(C=null,X.call(null,{result:-2,status:-2}),X=null):(q=1,o())}function o(){r({msgType:w,msgVersion:oe,payType:q,appid:p,appsig:f,appsigData:d,payItem:M,payInfo:A,reqTime:Date.now(),customMeta:G,payValue:L,qbopenid:O,qbopenkey:b,isCanChange:!1})}t.pay=e,t.repay=n}(se=e.iap||(e.iap={}));var ue;!function(t){function e(t,e){var n=0,a={status:n,result:n,attention:0,sendToDesktop:0,exitGame:0};e.call(null,a)}function n(t,e){}function a(t,e){}function o(t,e){}t.isSupport=e,t.exitGame=n,t.attention=a,t.sendToDesktop=o}(ue=e.app||(e.app={}));var ce;!function(t){function e(t,e){var n=0,a={status:n,result:n,share:1};e.call(null,a)}function n(t,e){Z=e,s(function(){r({msgType:U,msgVersion:oe,appid:p,appsig:f,appsigData:d,qbopenid:O,qbopenkey:b,title:t.title,summary:t.description,imageLocalUrl:t.img_url,img_title:t.img_title,cus_txt:"",targetUrl:t.url})})}t.isSupport=e,t.share=n}(ce=e.share||(e.share={}));var pe;!function(t){function e(t,e){var n=0,a={status:n,result:n,getFriends:0,openBBS:0};e.call(null,a)}function n(t,e){}function a(t,e){}t.isSupport=e,t.getFriends=n,t.openBBS=a}(pe=e.social||(e.social={}))}(e=t.qqhall2||(t.qqhall2={}))}(nest||(nest={}));var nest;!function(t){var e;!function(e){e.uid=void 0;var n;!function(e){function n(e,n){var a=[];t.utils.$isQQBrowser()&&(a.push("qq"),a.push("wx"));var o={result:0,loginType:a,loginTypes:void 0,getInfo:0};n.call(null,o)}function a(e,n){var a=function(e){t.h5.uid=e.id;var a=e.status;t.h5.uid&&(a=0);var o={result:a,token:e.token};n.call(null,o)};EgretH5Sdk.checkLogin(a,null)}function o(e,n){var a=function(e){t.h5.uid=e.id;var a=e.status;t.h5.uid&&(a=0);var o={result:a,token:e.token};n.call(null,o)};EgretH5Sdk.login(a,null,e.loginType)}function r(t,e){var n=function(t){var n=t.status,a=1==n?0:1;e.call(null,{result:a})};EgretH5Sdk.logout(n,null)}e.isSupport=n,e.checkLogin=a,e.login=o,e.logout=r}(n=e.user||(e.user={}));var a;!function(e){function n(e,n){t.h5.uid&&(e.appId=t.utils.$APP_ID,e.uId=t.h5.uid,EgretH5Sdk.pay(e,function(t){n(t)},this))}e.pay=n}(a=e.iap||(e.iap={}));var o;!function(e){function n(e,n){var a=function(t){var e=t.status,a={share:e};n.call(null,a)};EgretH5Sdk.isOpenShare(t.utils.$APP_ID,t.h5.uid,a,null)}function a(e,n){var a=function(t){var e=t.status;0==e?e=-1:1==e&&(e=0);var a={status:e,result:e};n.call(null,a)};EgretH5Sdk.share(t.utils.$APP_ID,t.h5.uid,e,a,null)}e.isSupport=n,e.share=a}(o=e.share||(e.share={}));var r;!function(t){function e(t,e){e.call(null,{result:0,getFriends:0,openBBS:0})
}function n(t,e){}function a(t,e){}t.isSupport=e,t.getFriends=n,t.openBBS=a}(r=e.social||(e.social={}));var i;!function(e){function n(e,n){var a=function(t){var e=t.status,a={attention:e};n.call(null,a)};EgretH5Sdk.isOpenAttention(t.utils.$APP_ID,t.h5.uid,a,null)}function a(e,n){EgretH5Sdk.attention(t.utils.$APP_ID,t.h5.uid),n.call(null,{result:0})}function o(t,e){e.call(null,{result:-1})}function r(e,n){var a=function(t){var e={result:0,contact:t.contact};n.call(null,e)};EgretH5Sdk.getCustomInfo(t.utils.$APP_ID,t.h5.uid,a,null)}e.isSupport=n,e.attention=a,e.sendToDesktop=o,e.getInfo=r}(i=e.app||(e.app={}))}(e=t.h5||(t.h5={}))}(nest||(nest={})),function(t){var e;!function(t){var e;!function(t){function e(t,e){var n={result:0,loginType:void 0,loginTypes:void 0,getInfo:0};EgretH5Sdk.getLoginType({},function(t){n.loginType=t.loginType,n.loginTypes=t.loginTypes,e.call(null,n)})}function n(t,e){EgretH5Sdk.checkLogin(t,e)}function a(t,e){EgretH5Sdk.login(t,e)}function o(t,e){EgretH5Sdk.logout(t,e)}function r(t,e){e.call(null,{result:-2})}t.isSupport=e,t.checkLogin=n,t.login=a,t.logout=o,t.getInfo=r}(e=t.user||(t.user={}));var n;!function(t){function e(t,e){EgretH5Sdk.pay(t,e)}t.pay=e}(n=t.iap||(t.iap={}));var a;!function(t){function e(t,e){var n=function(t){var n=t.result,a={share:n,msg:t.msg};e.call(null,a)};EgretH5Sdk.isSupportShare({},n)}function n(t,e){t.imgUrl=t.img_url,EgretH5Sdk.setShareDefaultData(t,e)}function a(t,e){t.imgUrl=t.img_url,EgretH5Sdk.share(t,e)}t.isSupport=e,t.setDefaultData=n,t.share=a}(a=t.share||(t.share={}));var o;!function(t){function e(t,e){var n,a=function(t){n=t.result;var a={result:0,getFriends:0,openBBS:n};e.call(null,a)};EgretH5Sdk.isSupportAttention({},a)}function n(t,e){e.call(null,{result:-2})}function a(t,e){EgretH5Sdk.openBBS(t,e)}t.isSupport=e,t.getFriends=n,t.openBBS=a}(o=t.social||(t.social={}));var r;!function(t){function e(t,e){var n,a,o=function(t){n=t.result,EgretH5Sdk.isSupportSendToDesktop({},r)},r=function(t){a=t.result;var o={attention:n,getInfo:1,exitGame:0,sendToDesktop:a};e.call(null,o)};EgretH5Sdk.isSupportAttention({},o)}function n(t,e){EgretH5Sdk.attention({},e)}function a(t,e){EgretH5Sdk.sendToDesktop(t,e)}function o(t,e){e.call(null,{result:-2})}function r(t,e){EgretH5Sdk.getCustomInfo({},e)}t.isSupport=e,t.attention=n,t.sendToDesktop=a,t.exitGame=o,t.getInfo=r}(r=t.app||(t.app={}))}(e=t.h5_2||(t.h5_2={}))}(nest||(nest={}));var nest;!function(t){var e;!function(t){function e(t,e,a){void 0===a&&(a=!1);var o="sdkPlugin";a?(egret.ExternalInterface.addCallback(o,function(t){var n=JSON.parse(t);e(n.data)}),egret.ExternalInterface.call(o,JSON.stringify(t))):(c.push({data:t,callback:e}),n())}function n(){if(c.length){if(p)return;p=!0;var t=c.shift(),e="sdkPlugin";egret.ExternalInterface.addCallback(e,function(e){var a=JSON.parse(e);t.callback(a.data),p=!1,n()}),egret.ExternalInterface.call(e,JSON.stringify(t.data))}}function a(t,n){var a={module:"core",action:"init",param:t};e(a,n)}var o;!function(t){function n(t,n){var a={module:"core",action:"callCustomMethod",param:t};e(a,n)}function a(t){var e="nest_callback";egret.ExternalInterface.addCallback(e,function(e){var n=JSON.parse(e);t(n)})}t.callCustomMethod=n,t.addCallback=a}(o=t.core||(t.core={}));var r;!function(t){function n(t,n){var a={module:"user",action:"isSupport",param:t};e(a,n)}function a(t,n){var a={module:"user",action:"checkLogin",param:t};e(a,n)}function o(t,n){var a={module:"user",action:"login",param:t};e(a,n,!0)}function r(t,n){var a={module:"user",action:"logout",param:t};e(a,n)}function i(t,n){var a={module:"user",action:"getInfo",param:t};e(a,n)}t.isSupport=n,t.checkLogin=a,t.login=o,t.logout=r,t.getInfo=i}(r=t.user||(t.user={}));var i;!function(t){function n(t,n){var a={module:"iap",action:"pay",param:t};e(a,n)}t.pay=n}(i=t.iap||(t.iap={}));var l;!function(t){function n(t,n){var a={module:"share",action:"isSupport",param:t};e(a,n)}function a(t,e){e.call(null,{result:-2})}function o(t,n){var a={module:"share",action:"share",param:t};e(a,n,!0)}t.isSupport=n,t.setDefaultData=a,t.share=o}(l=t.share||(t.share={}));var s;!function(t){function n(t,n){var a={module:"social",action:"isSupport",param:t};e(a,n)}function a(t,n){var a={module:"social",action:"getFriends",param:t};e(a,n)}function o(t,n){var a={module:"social",action:"openBBS",param:t};e(a,n)}t.isSupport=n,t.getFriends=a,t.openBBS=o}(s=t.social||(t.social={}));var u;!function(t){function n(t,n){var a={module:"app",action:"isSupport",param:t};e(a,n)}function a(t,n){var a={module:"app",action:"attention",param:t};e(a,n)}function o(t,n){var a={module:"app",action:"exitGame",param:t};e(a,n)}function r(t,n){var a={module:"app",action:"sendToDesktop",param:t};e(a,n)}function i(t,n){var a={module:"app",action:"getInfo",param:t};e(a,n)}t.isSupport=n,t.attention=a,t.exitGame=o,t.sendToDesktop=r,t.getInfo=i}(u=t.app||(t.app={}));var c=[];t.callRuntime=e;var p=!1;t._getData=n,t.init=a}(e=t["native"]||(t["native"]={}))}(nest||(nest={})),nest.core=nest.core||{},nest.core.addCallback=function(){},nest.core.startup=function(t,e){try{new egret.HashObject,nest.utils.$EGRET_SUPPORT=!0}catch(n){nest.utils.$EGRET_SUPPORT=!1}var a="http://api.egret-labs.org/v2/";if(nest.utils.$APP_ID=t.egretAppId,nest.utils.$DEBUG_LOG=t.debug,"true"==nest.utils.$getOption("egretnative"))return console.log("is egretnative"),nest.utils.$changeMethod("native"),void nest["native"].init({appid:nest.utils.$APP_ID,debug:nest.utils.$DEBUG_LOG},function(){console.log("nest startup"),e({result:0})});if(nest.utils.$isRuntime)if((nest.utils.$isQQBrowser()||nest.utils.$isTargetPlatform(10080)||nest.utils.$isTargetPlatform(10835)||nest.utils.$isTargetPlatform(20546))&&(a="http://api.gz.1251278653.clb.myqcloud.com/v2/"),nest.utils.$API_DOMAIN=a,nest.core.callCustomMethod=nest.runtime.core.callCustomMethod,nest.utils.$isTargetPlatform(10044)||!nest.utils.$getOption("egret.runtime.nest")){egret_native.setOption("channelTag","liebao"),CMPAY_DEBUG=!1;var o;o=85==nest.utils.$APP_ID||88==nest.utils.$APP_ID?10044:18287,egret_native.setOption("egret.runtime.spid",o),nest.utils.$spid=o,nest.utils.$changeMethod("cm")}else if(nest.utils.$isTargetPlatform(10835)||nest.utils.$isTargetPlatform(20546)){var o;66==nest.utils.$APP_ID||86==nest.utils.$APP_ID?(nest.qqhall.init(),nest.utils.$changeMethod("qqhall")):(nest.qqhall2.init(),nest.utils.$changeMethod("qqhall2"))}else nest.utils.$changeMethod("runtime");else{var r=nest.utils.$getOption("egretServerDomain");r?a=r+"/":nest.utils.$API_DOMAIN=a;var i=nest.utils.$getOption("egretSdkDomain");if(i||(i=nest.utils.$API_DOMAIN),2==t.version){nest.utils.$changeMethod("h5_2");var l=i+"/misc/scripts/egreth5sdk.js",s=document.createElement("script");return s.hasOwnProperty("async")&&(s.async=!1),s.src=l,s.id="egreth5sdk",s.addEventListener("load",function u(){this.removeEventListener("load",u,!1),EgretH5Sdk.init({},e)},!1),s.addEventListener("error",function c(){s.parentNode.removeChild(s),this.removeEventListener("error",c,!1),e({result:-2})},!1),void document.head.appendChild(s)}nest.utils.$changeMethod("h5")}e({result:0})};