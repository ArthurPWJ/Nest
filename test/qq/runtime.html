<!doctype html>
<meta charset="utf-8" />
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<style>
    body{
        font-size: 20px;
    }
    input,select,button{
        font-size: 2em;
        line-height: 2em;
        display: block;
        margin: 1em 0;
    }
</style>
<script src="http://jsapi.qq.com/get?api=x5gameplayer.*" type="text/javascript"></script>

<input id="input_url" value=""/>
<select id="input_orientation">
    <option value=landscape>landscape</option>
    <option value=portrait>portrait</option>
</select>
<button id="submit" onclick="start()">start</button>

<script>
    input_url.value = getOption("url");

    function start() {
        window.onerror = function () {
            alert(arguments[0])
        };

        var info = {
            "engineName": "egret",
            "localDebug": "false",
            "orientation": input_orientation.value,
            "gameName": "萌战记",
            "gameIconUrl": "http://snscwl.egret-labs.org/common/shareicon.png",
            "gameUrl": "http://www.qq.com",
            "ext": JSON.stringify({
                "gameId": '86',
                "zipUrl": input_url.value
            })
        };
        browser.x5gameplayer.run(info);
    }

    function getOption(key) {
        if (window.hasOwnProperty("location")) {
            var search = location.search;
            if (search == "") {
                return "";
            }
            search = search.slice(1);
            var searchArr = search.split("&");
            var length = searchArr.length;
            for (var i = 0; i < length; i++) {
                var str = searchArr[i];
                var arr = str.split("=");
                if (arr[0] == key) {
                    return arr[1];
                }
            }
        }
        return "";
    }
</script>