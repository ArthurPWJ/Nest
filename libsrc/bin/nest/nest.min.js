var nest;!function(e){var t;!function(e){}(t=e.user||(e.user={}))}(nest||(nest={}));var nest;!function(e){var t;!function(t){function n(t,n){e.core.startup(t,function(e){a(n)})}function a(t){e.user.checkLogin({},function(e){f=e,f.result=0,l(function(){t({result:0})})})}function l(t){e.user.isSupport({},function(e){d=e.getInfo;var n=e.loginTypes;if(n&&n.length)v=n;else if(e.loginType&&e.loginType.length){for(var a=e.loginType,l=[],i=0;i<a.length;i++)l.push({loginType:a[i]});v=l}else v=[];t()})}function i(){if(f&&f.token)return[];if(s()&&v&&v.length)for(var e=0;e<v.length;e++){var t=v[e];t.accInfo=null,v[e]=t}return v.concat()}function o(e,t){m?(m=!1,f&&f.token?t(f):r(e.loginType,t)):r(e.loginType,t)}function r(t,n){var a={};t&&""!=t&&"default"!=t&&(a.loginType=t),e.user.login(a,function(e){e.token?(u(),e.result=0,n(e)):(null==e.result&&(e.result=-2),n(e))})}function s(){return"1"==e.utils.localStorage.getItem("egret_logout")}function u(){return e.utils.localStorage.setItem("egret_logout",null)}function c(t,n){var a=function(t){0==t.result&&(f=null,e.utils.localStorage.setItem("egret_logout","1")),n(t)};e.user.logout(t,a)}function p(e,t){var n={result:0,getInfo:d};t(n)}function g(t,n){e.user.getInfo(t,n)}t.startup=n,t.getLoginTypes=i;var f,d,v,m=!0;t.login=o,t.logout=c,t.isSupport=p,t.getInfo=g}(t=e.easyuser||(e.easyuser={}))}(nest||(nest={}));var nest;!function(e){var t;!function(t){function n(t){for(var n=["core","user","iap","share","social","app","invite","createRole"],l=0;l<n.length;l++){var i=n[l];if(e[t]&&e[t][i]){null==e[i]&&(e[i]={});for(var o in e[t][i])e[i][o]=e[t][i][o];for(var o in e[i]){var r=e[i][o];"function"==typeof r&&a(i,o)}}}}function a(t,n){var a,l=e[t][n];a="isSupport"==n?function(e,a){u("[Nest]调用接口nest."+t+"."+n);var i=e,o=a;"function"==typeof e&&(i={},o=e);var r=function(e){u("[Nest]获得nest."+t+"."+n+"接口返回 : "+JSON.stringify(e)),o.call(null,e)};l.call(null,i,r)}:function(e,a){u("[Nest]调用接口nest."+t+"."+n);var i=function(e){u("[Nest]获得nest."+t+"."+n+"接口返回 : "+JSON.stringify(e)),a.call(null,e)};l.call(null,e,i)},e[t][n]=a}function l(){return void 0==t.$spid&&(t.$spid=parseInt(s("egret.runtime.spid"))),t.$spid}function i(){return void 0==p&&(p=s("channelTag")),p}function o(){return void 0==g&&(g=r(9392)),g}function r(e){return l()==e}function s(e){if(t.$EGRET_SUPPORT)return egret.getOption(e);if(window.location){var n=location.search;if(""==n)return"";n=n.slice(1);for(var a=n.split("&"),l=a.length,i=0;l>i;i++){var o=a[i],r=o.split("=");if(r[0]==e)return r[1]}}return""}function u(e){t.$DEBUG_LOG&&(t.$EGRET_SUPPORT&&egret.log?egret.log(e):console.log(e))}function c(e,t,n,a,l){var i="";for(var o in t)i+=o+"="+t[o]+"&";""!=i&&(i=i.substr(0,i.length-1));var r=new egret.URLLoader;r.addEventListener(egret.Event.COMPLETE,function(){var e=JSON.parse(r.data);a(e)},this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){l()},this);var s=new egret.URLRequest(e);s.method=n,s.data=new egret.URLVariables(i),r.load(s)}t.$DEBUG_LOG=!1,t.$changeMethod=n,t.$getSpid=l;var p;t.$getChannelTag=i;var g;t.$isQQBrowser=o,t.$isTargetPlatform=r,t.$getOption=s,t.$log=u,t.setProxy=c}(t=e.utils||(e.utils={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(t){function n(t,n){if(e.$isRuntime)egret.localStorage.setItem(t,n);else try{window.localStorage.setItem(t,n)}catch(a){}}function a(t){if(e.$isRuntime)return egret.localStorage.getItem(t);try{return window.localStorage.getItem(t)}catch(n){return}}t.setItem=n,t.getItem=a}(t=e.localStorage||(e.localStorage={}))}(t=e.utils||(e.utils={}))}(nest||(nest={})),this.navigator?nest.utils.$isRuntime=!1:nest.utils.$isRuntime=!0;var nest;!function(e){var t;!function(t){function n(e,t,n){void 0===n&&(n=!1);var l="nest";n?(egret.ExternalInterface.addCallback(l,function(e){var n=JSON.parse(e);t(n.data)}),egret.ExternalInterface.call(l,JSON.stringify(e))):(c.push({data:e,callback:t}),a())}function a(){if(c.length){if(p)return;p=!0;var e=c.shift(),t="nest";egret.ExternalInterface.addCallback(t,function(t){var n=JSON.parse(t);e.callback(n.data),p=!1,a()}),egret.ExternalInterface.call(t,JSON.stringify(e.data))}}var l;!function(e){function t(e,t){var a={module:"core",action:"callCustomMethod",param:e};n(a,t)}function a(e){var t="nest_callback";egret.ExternalInterface.addCallback(t,function(t){var n=JSON.parse(t);e(n)})}e.callCustomMethod=t,e.addCallback=a}(l=t.core||(t.core={}));var i;!function(t){function a(t,a){var l={module:"user",action:"isSupport",param:t};if(e.utils.$isQQBrowser()){var i=function(e){e.logout=1,a.call(null,e)};n(l,i)}else n(l,a)}function l(e,t){var a={module:"user",action:"checkLogin",param:e};n(a,t)}function i(e,t){var a={module:"user",action:"login",param:e};n(a,t,!0)}function o(e,t){var a=egret.getOption("egret.runtime.nest");if(a>=4||"custom"==a){var l={module:"user",action:"logout",param:e};n(l,t)}else t({result:0})}function r(e,t){var a={module:"user",action:"getInfo",param:e};n(a,t)}t.isSupport=a,t.checkLogin=l,t.login=i,t.logout=o,t.getInfo=r}(i=t.user||(t.user={}));var o;!function(e){function t(e,t){var a={module:"iap",action:"pay",param:e};n(a,t)}e.pay=t}(o=t.iap||(t.iap={}));var r;!function(e){function t(e,t){var a={module:"share",action:"isSupport",param:e};n(a,t)}function a(e,t){t.call(null,{result:-2})}function l(e,t){var a={module:"share",action:"share",param:e};n(a,t,!0)}e.isSupport=t,e.setDefaultData=a,e.share=l}(r=t.share||(t.share={}));var s;!function(e){function t(e,t){var a={module:"social",action:"isSupport",param:e};n(a,t)}function a(e,t){var a={module:"social",action:"getFriends",param:e};n(a,t)}function l(e,t){var a={module:"social",action:"openBBS",param:e};n(a,t)}e.isSupport=t,e.getFriends=a,e.openBBS=l}(s=t.social||(t.social={}));var u;!function(t){function a(e,t){var a={module:"app",action:"isSupport",param:e};n(a,t)}function l(e,t){var a={module:"app",action:"attention",param:e};n(a,t)}function i(e,t){var a={module:"app",action:"exitGame",param:e};n(a,t)}function o(e,t){var a={module:"app",action:"sendToDesktop",param:e};n(a,t)}function r(t,n){var a=e.utils.$API_DOMAIN+"user/getCustomInfo",l={appId:e.utils.$APP_ID,runtime:1,egretChanId:e.utils.$getSpid()};e.utils.setProxy(a,l,egret.URLRequestMethod.GET,function(e){var t=e.data;t.result=0,0==e.code?n.call(null,t):n.call(null,{result:-2})},function(){n.call(null,{result:-2})})}t.isSupport=a,t.attention=l,t.exitGame=i,t.sendToDesktop=o,t.getInfo=r}(u=t.app||(t.app={}));var c=[];t.callRuntime=n;var p=!1;t._getData=a}(t=e.runtime||(e.runtime={}))}(nest||(nest={}));var nest;!function(e){var t;!function(t){function n(e,t){var n;if(n=egret.localStorage.getItem("deviceid")){if(console.log("cm old local deviceid "+n),n.indexOf("{")>=0){var a=JSON.parse(n);e.postData.deviceid=a.did}else e.postData.deviceid=n;o(e.postData,t)}else{console.log("cm old CMPAY_EGRET.version "+CMPAY_EGRET.getVersion());var l=0==CMPAY_EGRET.getVersion()||0==CMPAY_EGRET.getVersion()?"getUid":"get_device_info",i=!1,r=function(n){i||(i=!0,console.log(n),e.postData.deviceid=n||egret.localStorage.getItem("deviceid")||"",o(e.postData,t))};egret.ExternalInterface.addCallback(l,function(e){if(console.log("cm old CMPAY_EGRET"),"get_device_info"==l)if(console.log("cm old get_device_info "+e),e){var t=JSON.parse(e);r(t.did)}else r(null);else r(e)}),egret.setTimeout(function(){console.log("cm old timeout"),r(null)},this,2e3),egret.ExternalInterface.call(l,"")}}function a(t){var n={},a=e.utils.$API_DOMAIN+"app/getInfo";n.egretChanId=e.utils.$getSpid(),n.egretGameId=e.utils.$APP_ID,n.debug=1,r(a,n,egret.URLRequestMethod.GET,function(e){t(e)})}function l(t,n,a){var l={};l.access_token=t.access_token,l.openid=t.openid;var i=e.utils.$API_DOMAIN+"game/"+e.utils.$getSpid()+"/"+e.utils.$APP_ID+"/";l.runtime=1,l.showGame=1,a&&(l.newLiebaoApi=1),r(i,l,egret.URLRequestMethod.GET,function(e){n(e)})}function i(n,a){var l=e.utils.$API_DOMAIN+"user/placeOrder",i={id:t.user.egretInfo.egretUserId,appId:e.utils.$APP_ID,time:Date.now(),runtime:1};for(var o in n)i[o]=n[o];r(l,i,egret.URLRequestMethod.GET,function(e){a(e)})}function o(e,t){var n="http://gclogin.liebao.cn/api/user/quick_register";r(n,e,egret.URLRequestMethod.POST,t)}function r(e,t,n,a){var l="";for(var i in t)l+=i+"="+t[i]+"&";""!=l&&(l=l.substr(0,l.length-1)),console.log("cm old solution ="+e+"?"+l);var o=new egret.URLLoader;o.addEventListener(egret.Event.COMPLETE,function(){console.log("cm old solution  ="+o.data);var e=JSON.parse(o.data);a(e)},this);var r=new egret.URLRequest(e);r.method=n,r.data=new egret.URLVariables(l),o.load(r)}t.callRuntime=n,t.loginBefore=a,t.loginAfter=l,t.payBefore=i}(t=e.cm||(e.cm={}))}(nest||(nest={})),function(e){var t;!function(t){var n;!function(t){function n(n,a){function l(e){t.egretInfo={egretUserId:e.data.id},e.data.result=e.status,a(e.data)}function i(t){1==t.ret?(t.access_token=t.ssid,egret.localStorage.getItem("deviceid")||egret.localStorage.setItem("deviceid",t.deviceid),e.cm.loginAfter(t,l,!1)):a({result:1})}function o(t){console.log("cm old loginHandler1"),console.log(JSON.stringify(t,null,4));var n={};n.access_token=t.cp.token,n.openid=t.user.openid,egret.localStorage.setItem("cm_token",n.access_token),console.log("cm old loginHandler2"),e.cm.loginAfter(n,l,!0)}function r(t){if(0==t.code){var l=t.data;s.client_id=l.client_id,s.client_secret=l.client_secret,s.redirect_uri=l.redirect_uri,e.cm.app.$initDesktop({Title:l.title,DetailUrl:l.detailUrl,PicUrl:l.picUrl}),CMGAME_EGRET.checkIsGameSDK(function(t,a){if(t){console.log("cm old checkIsGameSDK1");var r={clientId:l.client_id,clientSecret:l.client_secret,redirectUri:l.redirect_uri};egret.localStorage.getItem("cm_token"),console.log(JSON.stringify(r,null,4)),console.log("cm old checkIsGameSDK2"),CMGAME_EGRET.dispatchGameLoginData(r,o)}else console.log("cm old checkIsGameSDK2"),e.cm.callRuntime({module:"user",action:"checkLogin",param:n,postData:s},i)})}else a({result:1})}var s={};e.cm.loginBefore(r)}function a(t,n){var a={module:"user",action:"login",param:t};e.cm.callRuntime(a,n)}function l(e,t){console.log("cm old nest isSupport start"),t({getInfo:0,loginType:null,loginTypes:null,result:0})}function i(t,n){e.runtime.user.logout(t,n)}t.checkLogin=n,t.login=a,t.isSupport=l,t.logout=i}(n=t.user||(t.user={}))}(t=e.cm||(e.cm={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(t){function n(t,n){var l=0,i=-1,o=-2;e.payBefore(t,function(e){if(0==e.code){a&&(CMPAY_EGRET.on("cmpay_order_complete",function(e){console.log("cm old solution cmpay_order_complete  "+JSON.stringify(e,null,4)),n(1==e.success?{result:l}:2==e.ret?{result:i}:{result:o})}),a=!1);var t={access_token:e.data.access_token,client_id:e.data.client_id,product_id:e.data.product_id,unit:e.data.unit,payload:e.data.payload,notify_url:e.data.notify_url,money:e.data.money,order_name:e.data.order_name,game_icon:e.data.game_icon,game_name:e.data.game_name};CMPAY_EGRET.purchase(t)}else n({result:o})})}var a=!0;t.pay=n}(t=e.iap||(e.iap={}))}(t=e.cm||(e.cm={}))}(nest||(nest={})),function(e){var t;!function(t){var n;!function(t){function n(t,n){e.runtime.social.isSupport(t,n)}function a(t,n){e.runtime.social.getFriends(t,n)}function l(t,n){e.runtime.social.openBBS(t,n)}t.isSupport=n,t.getFriends=a,t.openBBS=l}(n=t.social||(t.social={}))}(t=e.cm||(e.cm={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(e){function t(e,t){t({result:0,share:0})}e.isSupport=t}(t=e.share||(e.share={}))}(t=e.cm||(e.cm={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(e){function t(e){l=e,egret.ExternalInterface.call("save_shortcut_info",JSON.stringify({token:String(Math.random()),value:JSON.stringify(e)}))}function n(e,t){t(0!=CMPAY_EGRET.getVersion()&&!isNaN(CMPAY_EGRET.getVersion())&&CMPAY_EGRET.getVersion()>301030?{result:0,sendToDesktop:1,attention:0}:{result:0,sendToDesktop:0,attention:0})}function a(e,t){l?(egret.ExternalInterface.call("push_icon",JSON.stringify({title:l.Title,detailUrl:l.DetailUrl,picUrl:l.PicUrl})),t({result:0})):t({result:-1})}var l;e.$initDesktop=t,e.isSupport=n,e.sendToDesktop=a}(t=e.app||(e.app={}))}(t=e.cm||(e.cm={}))}(nest||(nest={}));var nest;!function(e){var t;!function(t){function n(e,t,n,a){var l="";for(var i in t)l+=i+"="+t[i]+"&";""!=l&&(l=l.substr(0,l.length-1)),console.log("[Nest]qq hall send : "+e+"?"+l);var o=new egret.URLLoader;o.addEventListener(egret.Event.COMPLETE,function(){console.log("[Nest]qq hall get data : "+o.data);var e=JSON.parse(o.data);a(e)},this);var r=new egret.URLRequest(e);r.method=n,r.data=new egret.URLVariables(l),o.load(r)}function a(a,l){var i=e.utils.$API_DOMAIN+"user/placeOrder",o={id:t.userId,appId:e.utils.$APP_ID,time:Date.now(),openid:t.OpenId,openkey:t.OpenKey,paytoken:t.payToken,runtime:1};for(var r in a)o[r]=a[r];n(i,o,egret.URLRequestMethod.GET,function(e){l(e)})}function l(e){var t=JSON.stringify(e);egret.ExternalInterface.call("HALL_EGRET_MSG_FROM",t)}function i(){egret.ExternalInterface.addCallback("HALL_EGRET_MSG_TO",function(a){var i=JSON.parse(a);switch(i.msgType){case t.login_callback_type:if(null==i.accessToken){if(t.loginNum++,t.loginNum>=3){var o={result:-1,token:void 0};return t.loginCallback.call(null,o),void(t.loginCallback=null)}var r="OpenId/OpenKey 为空";return l({msgType:t.login_back_call_type,msgVersion:t.version,errorID:1,loginInfoStr:r}),void l({msgType:t.login_call_type,msgVersion:t.version})}if(t.loginCallback){t.gameType=i.msgType,t.gameVersion=i.msgVersion,t.OpenId=i.openId,t.OpenKey=i.accessToken,t.enterType=i.enterType,t.enterId=i.enterId,t.payToken=i.payToken;var r="登录成功";l({msgType:t.login_back_call_type,msgVersion:t.version,errorID:0,loginInfoStr:r});var s=e.utils.$API_DOMAIN+"game/"+e.utils.$getSpid()+"/"+e.utils.$APP_ID,u={};u.openkey=t.OpenKey,u.openid=t.OpenId,u.paytoken=t.payToken,u.runtime=1,u.showGame=1,n(s,u,egret.URLRequestMethod.GET,function(e){var n=e.data;t.userId=n.id,t.loginCallback.call(null,n),t.loginCallback=null})}break;case t.pay_callback_type:if(t.payCallback){var c=-1;switch(i.payState){case-1:case 1:case 2:t.payOrderInfo=null,t.payCallback.call(null,{result:c,status:c}),t.payCallback=null;break;case 0:t.iap.repay()}}break;case t.share_callback_type:if(t.shareCallback){var c=i.errorid;t.shareCallback.call(null,{result:c,status:c}),t.shareCallback=null}}})}t.login_call_type=102,t.login_back_call_type=100,t.pay_call_type=101,t.share_call_type=104,t.login_callback_type=200,t.pay_callback_type=201,t.share_callback_type=204,t.loginCallback=null,t.payCallback=null,t.shareCallback=null,t.version="V1.0.0",t.loginNum=0,t.payBefore=a,t.callHall=l,t.init=i}(t=e.qqhall||(e.qqhall={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(t){function n(e,t){var n=0,a={status:n,result:n,checkLogin:0,login:1,logout:0,getInfo:0};t.call(null,a)}function a(e,t){var n=-1,a={status:n,result:n,loginType:void 0,token:void 0};t.call(null,a)}function l(t,n){e.loginCallback=n,e.callHall({msgType:e.login_call_type,msgVersion:e.version})}t.isSupport=n,t.checkLogin=a,t.login=l}(t=e.user||(e.user={}))}(t=e.qqhall||(e.qqhall={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(t){function n(t,n){e.payOrderInfo||(e.payOrderInfo=t,e.payBefore(t,function(t){t=t.data,0==t.code?n.call(null,{result:0,status:0}):(e.payCallback=n,e.callHall({msgType:e.pay_call_type,msgVersion:"V1.0.0",acctType:"",zoneId:"",payValue:t.qCoins,isCanChange:!1}))}))}function a(){if(e.payOrderInfo){var t=e.payOrderInfo,n=e.payCallback;e.payBefore(t,function(e){e=e.data;var t=e.status;n.call(null,{result:t,status:t})}),e.payOrderInfo=null,e.payCallback=null}}t.pay=n,t.repay=a}(t=e.iap||(e.iap={}))}(t=e.qqhall||(e.qqhall={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(e){function t(e,t){var n=0,a={status:n,result:n,attention:0,sendToDesktop:0,exitGame:1};t.call(null,a)}function n(e){var t=0,n={status:t,result:t};e.call(null,n)}function a(e,t){}function l(e,t){}e.isSupport=t,e.exitGame=n,e.attention=a,e.sendToDesktop=l}(t=e.app||(e.app={}))}(t=e.qqhall||(e.qqhall={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(t){function n(e,t){var n=0,a={status:n,result:n,share:1};t.call(null,a)}function a(t,n){e.shareCallback=n,e.callHall({msgType:e.share_call_type,msgVersion:"V1.0.0",title:t.title,summary:t.description,imageLocalUrl:"",targetUrl:t.url})}t.isSupport=n,t.share=a}(t=e.share||(e.share={}))}(t=e.qqhall||(e.qqhall={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(e){function t(e,t){var n=0,a={status:n,result:n,getFriends:0,openBBS:0};t.call(null,a)}function n(e,t){}function a(e,t){}e.isSupport=t,e.getFriends=n,e.openBBS=a}(t=e.social||(e.social={}))}(t=e.qqhall||(e.qqhall={}))}(nest||(nest={}));var nest;!function(e){var t;!function(t){function n(t,n,a,l){var i="";for(var o in n)i+=o+"="+encodeURIComponent(n[o])+"&";""!=i&&(i=i.substr(0,i.length-1));for(var r="[Nest]qq hall2 send : "+t+"?"+i,s=0;s<Math.ceil(r.length/450);s++)e.utils.$log(r.slice(450*s,450*(s+1)));var u=new egret.URLLoader;u.addEventListener(egret.Event.COMPLETE,function(){e.utils.$log("[Nest]qq hall2 get data : "+u.data);var t=JSON.parse(u.data);l(t)},this);var c=new egret.URLRequest(t);c.method=a,c.data=new egret.URLVariables(i),u.load(c)}function a(t,a){var l=e.utils.$API_DOMAIN+"user/placeOrder",i={id:O,appId:e.utils.$APP_ID,time:Date.now(),qbopenkey:$,runtime:1};for(var o in t)i[o]=t[o];n(l,i,egret.URLRequestMethod.GET,function(e){a(e)})}function l(t,a){var l=e.utils.$API_DOMAIN+"pay/"+e.utils.$getSpid()+"/"+e.utils.$APP_ID;n(l,t,egret.URLRequestMethod.GET,function(e){a(e)})}function i(t){var n=JSON.stringify(t);e.utils.$log("call hall : "+n),egret.ExternalInterface.call("HALL_EGRET_MSG_FROM",n)}function o(e){tt=e,i({msgType:w,appid:p,appsig:g,appsigData:f,qbopenid:P,msgVersion:lt})}function r(e){nt=e,i({msgType:V,appid:p,appsig:g,msgVersion:lt})}function s(e){et=e,i({msgType:B,appid:p,qbopenid:P,refreshToken:"",msgVersion:lt})}function u(e){at=e,i({msgType:x,appid:p,appsig:g,appsigData:f,qbopenid:"",qbopenkey:"",msgVersion:lt})}function c(){egret.ExternalInterface.addCallback("HALL_EGRET_MSG_TO",function(t){e.utils.$log("get hall data : "+t);for(var a=0;a<Math.ceil(t.length/450);a++)e.utils.$log(t.slice(450*a,450*(a+1)));var i,s=JSON.parse(t);switch(s.msgType){case J:if(W)if(i=s.result,0==i){_=s.msgType,y=s.msgVersion,k=s.openId,S=s.accessToken,I=s.enterType,T=s.enterId,E=s.payToken,P=s.qbopenid,$=s.qbopenkey,D=s.nickName,R=s.avatarUrl;var u=function(){if(W){var t=e.utils.$API_DOMAIN+"game/"+e.utils.$getSpid()+"/"+e.utils.$APP_ID,a={};a.openId=k,a.accessToken=S,a.payToken=E,a.qbopenid=P,a.qbopenkey=$,a.nickName=D,a.avatarUrl=R,a.balance=it,a.gen_balance=d,a.first_save=v,a.save_amt=m,a.pf=b,a.baseinfo=JSON.stringify(h),a.runtime=1,n(t,a,egret.URLRequestMethod.GET,function(e){var t=e.data;O=t.id,W.call(null,t),W=null})}},c=!1,p=!1;o(function(){c=!0,c&&p&&u()}),r(function(){p=!0,c&&p&&u()})}else W.call(null,{result:-2}),W=null;break;case F:if(X){if(0!=A){var g={};g.realSaveNum=s.realSaveNum,g.orderno=s.orderno,g.customMeta=G,l(g,function(e){0==e.code?(q=null,X.call(null,{result:0,status:0}),X=null,o(null)):(q=null,X.call(null,{result:-2,status:-2}),X=null)});break}2==s.resultCode?(q=null,X.call(null,{result:-1,status:-1}),X=null):0==s.resultCode?o(function(){st.repay()}):(q=null,X.call(null,{result:-2,status:-2}),X=null)}break;case Y:Z&&(i=s.errorid,Z.call(null,{result:i,status:i}),Z=null);break;case K:0==s.result&&($=s.qbopenkey),et&&(et.call(null),et=null);break;case Q:0==s.result&&(it=s.balance,d=s.gen_balance,v=s.first_save,m=s.save_amt),tt&&(tt.call(null),tt=null);break;case j:0==s.result&&(h=s.baseinfo),nt&&(nt.call(null),nt=null);break;case z:1==s.loginType?ot.push("qq"):2==s.loginType?ot.push("wx"):3==s.loginType&&(ot.push("qq"),ot.push("wx")),at&&(at.call(null),at=null)}})}var p,g,f,d,v,m,h,_,y,k,S,I,T,E,P,$,D,R,O,b,q,A,L,C,M,G,N=100,U=101,H=104,B=106,w=107,V=108,x=109,J=200,F=201,Y=204,K=206,Q=207,j=208,z=209,W=null,X=null,Z=null,et=null,tt=null,nt=null,at=null,lt="1.0.0",it=0,ot=[];t.init=c;var rt;!function(t){function a(e,t){u(function(){var e=0,n={status:e,result:e,loginType:ot,checkLogin:0,login:1,logout:0,getInfo:0};t.call(null,n)})}function l(t,a){var l=e.utils.$API_DOMAIN+"app/getSignInfo",i={egretChanId:e.utils.$getSpid(),appId:e.utils.$APP_ID};n(l,i,egret.URLRequestMethod.GET,function(e){p=e.data.appid,g=e.data.appsig,f=e.data.appsigdata;var t=-2,n={status:t,result:t,loginType:void 0,token:void 0};a.call(null,n)})}function o(e,t){W=t,b=e.loginType,i({msgType:N,appid:p,appsig:g,appsigData:f,loginType:b,msgVersion:lt})}t.isSupport=a,t.checkLogin=l,t.login=o}(rt=t.user||(t.user={}));var st;!function(e){function t(e,t){q||(q=e,s(function(){a(e,function(e){e=e.data,L=e.payValue,M=e.payInfo,C=e.payItem,G=e.customMeta,X=t,A=L>it?0:1,l()})}))}function n(){L>it?X&&(q=null,X.call(null,{result:-2,status:-2}),X=null):(A=1,l())}function l(){i({msgType:U,msgVersion:lt,payType:A,appid:p,appsig:g,appsigData:f,payItem:C,payInfo:M,reqTime:Date.now(),customMeta:G,payValue:L,qbopenid:P,qbopenkey:$,isCanChange:!1})}e.pay=t,e.repay=n}(st=t.iap||(t.iap={}));var ut;!function(e){function t(e,t){var n=0,a={status:n,result:n,attention:0,sendToDesktop:0,exitGame:0};t.call(null,a)}function n(e,t){}function a(e,t){}function l(e,t){}e.isSupport=t,e.exitGame=n,e.attention=a,e.sendToDesktop=l}(ut=t.app||(t.app={}));var ct;!function(e){function t(e,t){var n=0,a={status:n,result:n,share:1};t.call(null,a)}function n(e,t){Z=t,s(function(){i({msgType:H,msgVersion:lt,appid:p,appsig:g,appsigData:f,qbopenid:P,qbopenkey:$,title:e.title,summary:e.description,imageLocalUrl:e.img_url,img_title:e.img_title,cus_txt:"",targetUrl:e.url})})}e.isSupport=t,e.share=n}(ct=t.share||(t.share={}));var pt;!function(e){function t(e,t){var n=0,a={status:n,result:n,getFriends:0,openBBS:0};t.call(null,a)}function n(e,t){}function a(e,t){}e.isSupport=t,e.getFriends=n,e.openBBS=a}(pt=t.social||(t.social={}))}(t=e.qqhall2||(e.qqhall2={}))}(nest||(nest={}));var nest;!function(e){var t;!function(t){t.uid=void 0;var n;!function(t){function n(t,n){var a=[];e.utils.$isQQBrowser()&&(a.push("qq"),a.push("wx"));var l={result:0,loginType:a,loginTypes:void 0,getInfo:0};n.call(null,l)}function a(t,n){var a=function(t){e.h5.uid=t.id;var a=t.status;e.h5.uid&&(a=0);var l={result:a,token:t.token};n.call(null,l)};EgretH5Sdk.checkLogin(a,null)}function l(t,n){var a=function(t){e.h5.uid=t.id;var a=t.status;e.h5.uid&&(a=0);var l={result:a,token:t.token};n.call(null,l)};EgretH5Sdk.login(a,null,t.loginType)}function i(e,t){var n=function(e){var n=e.status,a=1==n?0:1;t.call(null,{result:a})};EgretH5Sdk.logout(n,null)}t.isSupport=n,t.checkLogin=a,t.login=l,t.logout=i}(n=t.user||(t.user={}));var a;!function(t){function n(t,n){e.h5.uid&&(t.appId=e.utils.$APP_ID,t.uId=e.h5.uid,EgretH5Sdk.pay(t,function(e){n(e)},this))}t.pay=n}(a=t.iap||(t.iap={}));var l;!function(t){function n(t,n){var a=function(e){var t=e.status,a={share:t};n.call(null,a)};EgretH5Sdk.isOpenShare(e.utils.$APP_ID,e.h5.uid,a,null)}function a(t,n){var a=function(e){var t=e.status;0==t?t=-1:1==t&&(t=0);var a={status:t,result:t};n.call(null,a)};EgretH5Sdk.share(e.utils.$APP_ID,e.h5.uid,t,a,null)}t.isSupport=n,t.share=a}(l=t.share||(t.share={}));var i;!function(t){function n(t,n){var a=function(e){var t=e.status,a={invite:t};n.call(null,a)};EgretH5Sdk.isOpenInvite(e.utils.$APP_ID,e.h5.uid,a,null)}function a(t,n){var a=function(e){var t=e.status;0==t?t=-1:1==t&&(t=0);var a={status:t,result:t};n.call(null,a)};EgretH5Sdk.invite(e.utils.$APP_ID,e.h5.uid,t,a,null)}t.isSupport=n,t.invite=a}(i=t.invite||(t.invite={}));var o;!function(t){function n(t,n){var a=function(e){var t=e.status,a={createRole:t};n.call(null,a)};EgretH5Sdk.isOpenCreateRole(e.utils.$APP_ID,e.h5.uid,a,null)}function a(t,n){var a=function(e){var t=e.status;0==t?t=-1:1==t&&(t=0);var a={status:t,result:t};n.call(null,a)};EgretH5Sdk.createRole(e.utils.$APP_ID,e.h5.uid,t,a,null)}t.isSupport=n,t.createRole=a}(o=t.createRole||(t.createRole={}));var r;!function(e){function t(e,t){t.call(null,{result:0,getFriends:0,openBBS:0})}function n(e,t){}function a(e,t){}e.isSupport=t,e.getFriends=n,e.openBBS=a}(r=t.social||(t.social={}));var s;!function(t){function n(t,n){var a=function(e){var t=e.status,a={attention:t};n.call(null,a)};EgretH5Sdk.isOpenAttention(e.utils.$APP_ID,e.h5.uid,a,null)}function a(t,n){EgretH5Sdk.attention(e.utils.$APP_ID,e.h5.uid),n.call(null,{result:0})}function l(e,t){t.call(null,{result:-1})}function i(t,n){var a=function(e){var t={result:0,contact:e.contact};n.call(null,t)};EgretH5Sdk.getCustomInfo(e.utils.$APP_ID,e.h5.uid,a,null)}t.isSupport=n,t.attention=a,t.sendToDesktop=l,t.getInfo=i}(s=t.app||(t.app={}))}(t=e.h5||(e.h5={}))}(nest||(nest={})),function(e){var t;!function(e){var t;!function(e){function t(e,t){var n={result:0,loginType:void 0,loginTypes:void 0,getInfo:0};EgretH5Sdk.getLoginType({},function(e){n.loginType=e.loginType,n.loginTypes=e.loginTypes,t.call(null,n)})}function n(e,t){EgretH5Sdk.checkLogin(e,t)}function a(e,t){EgretH5Sdk.login(e,t)}function l(e,t){EgretH5Sdk.logout(e,t)}function i(e,t){t.call(null,{result:-2})}e.isSupport=t,e.checkLogin=n,e.login=a,e.logout=l,e.getInfo=i}(t=e.user||(e.user={}));var n;!function(e){function t(e,t){EgretH5Sdk.pay(e,t)}e.pay=t}(n=e.iap||(e.iap={}));var a;!function(e){function t(e,t){var n=function(e){var n=e.result,a={share:n,msg:e.msg};t.call(null,a)};EgretH5Sdk.isSupportShare({},n)}function n(e,t){e.imgUrl=e.img_url,EgretH5Sdk.setShareDefaultData(e,t)}function a(e,t){e.imgUrl=e.img_url,EgretH5Sdk.share(e,t)}e.isSupport=t,e.setDefaultData=n,e.share=a}(a=e.share||(e.share={}));var l;!function(e){function t(e,t){var n=function(e){var n=e.result,a={invite:n,msg:e.msg};t.call(null,a)};EgretH5Sdk.isSupportInvite({},n)}function n(e,t){e.imgUrl=e.img_url,EgretH5Sdk.invite(e,t)}e.isSupport=t,e.invite=n}(l=e.invite||(e.invite={}));var i;!function(e){function t(e,t){var n=function(e){var n=e.result,a={createRole:n,msg:e.msg};t.call(null,a)};EgretH5Sdk.isSupportCreateRole({},n)}function n(e,t){e.data=e.data,EgretH5Sdk.createRole(e,t)}e.isSupport=t,e.createRole=n}(i=e.createRole||(e.createRole={}));var o;!function(e){function t(e,t){var n,a=function(e){n=e.result;var a={result:0,getFriends:0,openBBS:n};t.call(null,a)};EgretH5Sdk.isSupportAttention({},a)}function n(e,t){t.call(null,{result:-2})}function a(e,t){EgretH5Sdk.openBBS(e,t)}e.isSupport=t,e.getFriends=n,e.openBBS=a}(o=e.social||(e.social={}));var r;!function(e){function t(e,t){var n,a,l=function(e){n=e.result,EgretH5Sdk.isSupportSendToDesktop({},i)},i=function(e){a=e.result;var l={attention:n,getInfo:1,exitGame:0,sendToDesktop:a};t.call(null,l)};EgretH5Sdk.isSupportAttention({},l)}function n(e,t){EgretH5Sdk.attention({},t)}function a(e,t){EgretH5Sdk.sendToDesktop(e,t)}function l(e,t){t.call(null,{result:-2})}function i(e,t){EgretH5Sdk.getCustomInfo({},t)}e.isSupport=t,e.attention=n,e.sendToDesktop=a,e.exitGame=l,e.getInfo=i}(r=e.app||(e.app={}))}(t=e.h5_2||(e.h5_2={}))}(nest||(nest={})),nest.core=nest.core||{},nest.core.addCallback=function(){},nest.core.startup=function(e,t){try{new egret.HashObject,nest.utils.$EGRET_SUPPORT=!0}catch(n){nest.utils.$EGRET_SUPPORT=!1}var a="http://api.egret-labs.org/v2/";if(nest.utils.$APP_ID=e.egretAppId,nest.utils.$DEBUG_LOG=e.debug,nest.utils.$isRuntime)if((nest.utils.$isQQBrowser()||nest.utils.$isTargetPlatform(10080)||nest.utils.$isTargetPlatform(10835)||nest.utils.$isTargetPlatform(20546))&&(a="http://api.gz.1251278653.clb.myqcloud.com/v2/"),nest.utils.$API_DOMAIN=a,nest.core.callCustomMethod=nest.runtime.core.callCustomMethod,nest.utils.$isTargetPlatform(10044)||!nest.utils.$getOption("egret.runtime.nest")){egret_native.setOption("channelTag","liebao"),CMPAY_DEBUG=!1;var l;l=85==nest.utils.$APP_ID||88==nest.utils.$APP_ID?10044:18287,egret_native.setOption("egret.runtime.spid",l),nest.utils.$spid=l,nest.utils.$changeMethod("cm")}else if(nest.utils.$isTargetPlatform(10835)||nest.utils.$isTargetPlatform(20546)){var l;66==nest.utils.$APP_ID||86==nest.utils.$APP_ID?(nest.qqhall.init(),nest.utils.$changeMethod("qqhall")):(nest.qqhall2.init(),nest.utils.$changeMethod("qqhall2"))}else nest.utils.$changeMethod("runtime");else{var i=nest.utils.$getOption("egretServerDomain");i?a=i+"/":nest.utils.$API_DOMAIN=a;var o=nest.utils.$getOption("egretSdkDomain");if(o||(o=nest.utils.$API_DOMAIN),2==e.version){nest.utils.$changeMethod("h5_2");var r=o+"/misc/scripts/egreth5sdk.js",s=document.createElement("script");return s.hasOwnProperty("async")&&(s.async=!1),s.src=r,s.id="egreth5sdk",s.addEventListener("load",function u(){this.removeEventListener("load",u,!1),EgretH5Sdk.init({},t)},!1),s.addEventListener("error",function c(){s.parentNode.removeChild(s),this.removeEventListener("error",c,!1),t({result:-2})},!1),void document.head.appendChild(s)}nest.utils.$changeMethod("h5")}t({result:0})};